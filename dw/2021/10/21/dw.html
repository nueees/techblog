<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Data Warehouse(Mart, Lake) | Cho’s Tech blog</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Data Warehouse(Mart, Lake)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="section1" />
<meta property="og:description" content="section1" />
<link rel="canonical" href="https://nueees.github.io/techblog/dw/2021/10/21/dw.html" />
<meta property="og:url" content="https://nueees.github.io/techblog/dw/2021/10/21/dw.html" />
<meta property="og:site_name" content="Cho’s Tech blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-21T00:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2021-10-21T00:00:00-05:00","url":"https://nueees.github.io/techblog/dw/2021/10/21/dw.html","@type":"BlogPosting","dateModified":"2021-10-21T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://nueees.github.io/techblog/dw/2021/10/21/dw.html"},"headline":"Data Warehouse(Mart, Lake)","description":"section1","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/techblog/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://nueees.github.io/techblog/feed.xml" title="Cho's Tech blog" /><link rel="shortcut icon" type="image/x-icon" href="/techblog/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/techblog/">Cho&#39;s Tech blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/techblog/about/">About Me</a><a class="page-link" href="/techblog/gitInfo/">gitInfo</a><a class="page-link" href="/techblog/search/">Search</a><a class="page-link" href="/techblog/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Data Warehouse(Mart, Lake)</h1><p class="page-description">section1</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-10-21T00:00:00-05:00" itemprop="datePublished">
        Oct 21, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      2 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/techblog/categories/#dw">dw</a>
        
      
      </p>
    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://www.netsuite.com/portal/resource/articles/data-warehouse/data-mart.shtml">oracle netsuite</a>
<a href="https://www.educba.com/star-schema-vs-snowflake-schema/">educba</a></p>

<hr />

<h1 id="1-data-warehouse">1. Data Warehouse</h1>

<h2 id="11-dw">1.1. DW</h2>

<h3 id="vendors">Vendors</h3>

<p>RedShift, BigQuery, Snowflake : cloud only<br />
Azure Synapse Analytics(MS), Autonomous Data Warehouse(Oracle), Db2 Warehouse(IBM), Teradata Vantage, Vertica : on premise &amp; cloud</p>

<h2 id="12-structure">1.2. Structure</h2>

<h3 id="fact-table-business-measure">Fact table: business measure</h3>
<p><img src="https://user-images.githubusercontent.com/83441376/158987751-652985de-6866-4ac7-8eff-1263022a376c.png" alt="image" />
fact table의 각 row: measurement event</p>

<h3 id="demension-fact-table에-필수적을-동반되며-business-process-measurement-event와-연관된-내용-서술">Demension: fact table에 필수적을 동반되며 business process measurement event와 연관된 내용 서술</h3>
<p><img src="https://user-images.githubusercontent.com/83441376/158987764-5088bb75-6e67-44df-8df3-75b075ffd561.png" alt="image" />
event와 관련된 who, what, when, how, and why<br />
각 dimension들은 하나의 pk로 정의됨</p>

<p>1) Star schema
<img src="https://user-images.githubusercontent.com/83441376/158987980-2b1e3787-bd11-498c-9e00-059f43bad09c.png" alt="image" /></p>

<p><img src="https://user-images.githubusercontent.com/83441376/158989547-49ea859b-aaca-4a5d-8318-a37f06582050.png" alt="image" />
business-level로 fact table이 생성됨 (sales data..)
sales facts table: item, location, branch, time, units, dollars로 구성</p>

<p>2) Snowflake schema
<img src="https://user-images.githubusercontent.com/83441376/158989694-785ee7aa-c029-406a-8d57-fe53e269e10a.png" alt="image" />
Star schema에서 정규화되서 더 확장된 버전</p>

<h2><br /><br /></h2>
<h1 id="2-data-mart">2. Data Mart</h1>

<h2 id="21-types">2.1. Types</h2>
<p>DW에서 주제 지향적 subset</p>

<p>1) Dependent 
<img src="https://user-images.githubusercontent.com/83441376/158984922-c57a61c6-03dc-4ef6-a635-c94dd9c4c9e6.png" alt="image" /></p>

<p>2) Independent
<img src="https://user-images.githubusercontent.com/83441376/158985009-6019b49b-cb5a-47ff-8d9e-0b22aa4c76dc.png" alt="image" /></p>

<p>3) Hybrid
<img src="https://user-images.githubusercontent.com/83441376/158985244-d1b42efd-fe4a-49e1-9221-62a40b7efd76.png" alt="image" /></p>

<h2 id="-1"><br /><br /></h2>

<h1 id="3-query">3. Query</h1>

<h2 id="31-grouping-sets">3.1. Grouping Sets</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select country, category, sum(amount) as totalsales
from factsales
left join dimcontry
on factsales.countryid = dimcontry.countryid
left join dimcategory
on factsales.categoryid=dimcategory.categoryid
group by grouping sets(country, category)
order by country, category
&gt; COUNTRY		  CATEGORY	    TOTALSALES
  Argentina	     	        21755581
  Australia	     	        21522004
  Austria	 	              21365726
  Azerbaijan	     	       21325766
  ...
              Books	      239357597
              Electronics	239912568
              Software	   240289802
              Sports	     240709913
              Toys	       240736378

</code></pre></div></div>

<h2 id="32-rollups">3.2. Rollups</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select country, category, sum(amount) as totalsales
from factsales
left join dimcontry
on factsales.countryid = dimcontry.countryid
left join dimcategory
on factsales.categoryid=dimcategory.categoryid
group by rollup(country, category)
order by country, category
&gt; COUNTRY	  CATEGORY	   TOTALSALES
  Argentina	Books	      4285010
  Argentina	Electronics	4338757
  Argentina	Software	   4292153
  Argentina	Sports	     4450354
  Argentina	Toys	       4389307
  Argentina             21755581
  ...
  Vietnam	  Books	      4238299
  Vietnam	  Electronics	4339044
  Vietnam	  Software	   4221673
  Vietnam	  Sports	     4175508
  Vietnam	  Toys	       4306048
  Vietnam               21280572
                        1201006258

</code></pre></div></div>

<h2 id="33-cubes">3.3. Cubes</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select country, category, sum(amount) as totalsales
from factsales
left join dimcontry
on factsales.countryid = dimcontry.countryid
left join dimcategory
on factsales.categoryid=dimcategory.categoryid
group by cube(country, category)
order by country, category
&gt; COUNTRY	  CATEGORY	   TOTALSALES
  Argentina	Books	      4285010
  Argentina	Electronics	4338757
  Argentina	Software	   4292153
  Argentina	Sports	     4450354
  Argentina	Toys	       4389307
  Argentina             21755581
  Vietnam	  Books	      4238299
  Vietnam	  Electronics	4339044
  Vietnam	  Software	   4221673
  Vietnam	  Sports	     4175508
  Vietnam	  Toys	       4306048
  Vietnam               21280572
  ...
            Books	      239357597
            Electronics	239912568
            Software	   240289802
            Sports	     240709913
            Toys	       240736378
                        1201006258

</code></pre></div></div>

<h2 id="34-materialized-views">3.4. Materialized Views</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE total_sales_per_country (country, category, totalsales) AS
  (select country, category, sum(amount) as totalsales
   from factsales
   left join dimcontry
   on factsales.countryid = dimcontry.countryid
   left join dimcategory
   on factsales.categoryid=dimcategory.categoryid
   group by country, category)
     DATA INITIALLY DEFERRED
     REFRESH DEFERRED
     MAINTAINED BY SYSTEM;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>refresh table total_sales_per_country;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>select * from total_sales_per_country where totalsales &gt; 4306048;
</code></pre></div></div>

<h2 id="-2"><br /><br /></h2>

  </div><a class="u-url" href="/techblog/dw/2021/10/21/dw.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/techblog/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/techblog/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/techblog/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>A challenge-loving data engineer.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
