---
toc: true
layout: post
description: section1
categories: [git,github]
title: Git & Github
---

📎 [tacademy](https://youtu.be/YQat_D1C-ps)

---

# 1. Git

## 1.1. Version Control System
파일 변경 사항을 저장하고, 원하는 시점의 버전을 다시 꺼내올 수 있는 시스템  
Snapshot: 특정 시점에서 파일의 상태  
Delta: 파일의 이전 상태와 비교한 변경사항  

### without VCY
1) 변경 사항 파악 어려움  
2) 삭제 파일 되돌리기 어려움  
3) 용량 차지  
4) 협업 어려움  

### SVN vs Git

1) SVN: Central VCS으로 파일의 모든 변경 사항을 저장  
2) Git: Distributed VCS으로 저장소의 파일 시스템 전체를 snapshot으로 취급, 변경되지 않은 파일은 새로 저장하지 않고 링크만 저장  

<br>
---
## 1.2. Initialization & Repository
사용자가 변경한 모든 내용을 추적하는 공간  
current status, modified time, modified user, description 등  

1) Local에서 저장 및 버전 관리 가능 (remote server에 나중에 upload 가능)  
2) Data 추가만 가능 (삭제 == 삭제 기록 추가)  
3) file 및 directory를 추적하지 않음 (각 문자와 line을 추적)  

### Tracked & Untracked

1) Unmodified: 이전 버전과 비교하여 수정된 부분이 없는 상태  
2) Modified: 이전 버전과 비교하여 수정된 부분이 있는 상태  
3) Staged: 저장(commit)을 위해 준비된 상태  

### Staging

1) 여러 작업 중, 일부분만 commit 해야할 때  
2) commit 전 상태를 수정 또는 체크할 때  

### Content-addressable Key-Value Storage

version의 주소 값을 찾을 key: 내용(파일 구조)등을 Hash값으로 만들고 상태를 나타냄


<br>
---
# 2. Configuration

## 2.1. .git
버전 관리 정보가 담긴 디렉토리
(config, logs, refs 등)

## 2.2. .gitignore
```
file # 특정 파일 file 제외하기

/file  # 현재 경로에 있는 파일 제외하기

folder/  # 특정 폴더 folder 안의 파일 모두 제외하기

folder/file # 특정 경로의 특정 파일 제외하기

folder / ** / files # 특정 경로 아래의 모든 file 제외하기

*.txt # 특정 확장자 파일 제외

!file # 예외 만들기
```
추적을 무시하려면 정규표현식으로 저장  

## 2.3. README.md
프로젝트 내용(이미지/로고)  
설치 방법  
코드 예제  
개발 환경 설정 방법  
contribute방법  
로그 변경  
credit  
license  
contact  


## 2.4. initial config

### 사용자 설정 확인:  
```
git config --list
```

### 시작 버전 생성 (master branch에 기록됨):  
```
git init
```

### 혹은 기존 프로젝트 이용시에는 remote 저장소에서 다운로드:  
```
git clone [url]
```

### branch 생성, 삭제 및 remote 저장소의 branch 확인:  
```
git branch [name]
git branch -d [branch1]
git branch -r
```


## 2.5. Staging 상태

![image](https://user-images.githubusercontent.com/83441376/219854378-6a53c990-8b41-4231-bd97-6e06d8eccf87.png)

### staging area에 추가:  
```
git add [file]
```

### staging area에서 제거:  
```
git restore --staged (파일명)
```
예전 git reset HEAD (파일명)와 동일

### staging area와 working directory 동시 제거:  
```
git restore (파일명)
```
 


## 2.5. 그 외

### file status 체크(modified, staged):  
변경 내용확인:  
```
git status
git diff
```

### message옵션으로 설명과 함께 커밋:  
```
git commit -ㅡ "add README.md"
```

### 로컬 변경 내역 remote로 푸시:
```
git push -u
git push origin master
```
origin을 remote 프로젝트의 master branch에 업데이트  
push -u 옵션을 생략하면 set-upstream 설정을 해야함  
git config --global push.default current 설정하면 됨  




### master혹은 branch로 이동:  
```
git checkout master
git checkout [branch]
```


### branch2를 현재 branch와 합칠 때:  
```
git merge [branch2]
```
 



### 분기가 많아져서 관리가 어려울 때 베이스 재설정:  
```
git rebase master 
```
base(기존 master)를 future(새로운 master)로 re-base  
굳이 다른 branch에서 merge해서 다시 base로 옮기는 (고리생성) 작업 불필요  



<br>
---
# 3. HEAD
현재 속한 브랜치의 가장 최신 커밋

## 3.1. checkout
익명의 브랜치에 위치하고 다른밋커밋 explore 가능  

### checkout으로 이동
^ 또는 ~: 갯수만큼 이전으로 이동
```
git checkout HEAD^
git checkout HEAD^^^
git checkout HEAD~5
```

(이동을) 한 단계 되돌리기
```
git checkout -
```
### 이전으로 checkout된 상태에서 HEAD 상태

```
git checkout HEAD^
git switch branch-1
```
## 3.2. 실습

```
main] git log
commit 063a9b9cfbc22d416cd2dbf283c43429d3e126b1 (HEAD -> main)
Author:
Date:
    main 3rd commit

commit 0cef8538cdbff37e94339471dd5ebd815390e547
Author:
Date:
    main 2nd commit

commit 8d0330a37e39ebca693e53efa2cfef2ce092462e
Author:
Date:
    First commit
```

### 다른 커밋 상태로 checkout
```
main] git checkout HEAD^ # 혹은 git checkout 0cef8538cdbff37e94339471dd5ebd815390e547
```

```
((0cef853...))] git log
commit 0cef8538cdbff37e94339471dd5ebd815390e547 (HEAD)
Author:
Date:
    main 2nd commit

commit 8d0330a37e39ebca693e53efa2cfef2ce092462e
Author:
Date:
    First commit
```

### 다시 main 돌아오기
```
((0cef853...))] git switch main
```

### 
```

```

### 
```

```

### 
```

```

<br>
---
# 4. 협업

## 4.1. Remote에서 가져오기

### remote 추가 및 삭:  
```
git remote add origin [url]
git remote -v
git remote remove origin
```
origin이라는 이름으로 remote 저장소의 url(프로젝트)과 연결

## 4.2. push와 pull

### 로컬에서 원격으로 변경사항 push:  
```
git push
```   
이미 git push -u origin main로 원격 대상 branch가 지정되어 있으므로 원격 main으로 푸시함   

### 원격에서 변경사항 로컬로 pull:  
```
git pull
```

### pull할 것이 있을 때 push시:  
원격에 먼저 적용된 새 버전이 있으므로 적용 불가  
pull 해서 원격의 버전을 받아온 다음 push 가능  

#### 방법1 - merge (default)  
```
git pull --no-rebase
충돌 수정
git add .
git commit
git push origin main
```
![image](https://user-images.githubusercontent.com/83441376/219850724-0b9acc62-b092-49fd-870e-b11be9a39e60.png)
새로 따진 브런치에서 수정 후 main으로 들어가는 방식 적용  

#### 방법2 - rebase  
```
git pull --rebase
충돌 수정
git add .
git commit
git rebase --continue
git push origin main
```
![image](https://user-images.githubusercontent.com/83441376/219851011-2e2072bd-e720-4c0d-b5e2-d6b5e1c4b446.png)
브런치 새로 따지지 않고 main에서 main이 local 수정 내역 추가하는 방식 적용

## 4.3. syncronize 방식

### remote repo와 동기화 후 합치기 전에 일단 확인 시 fetch:  
```
git fetch
```

### remote repo와 동기화 및 merge 작업 확인 안하고 그냥 합칠 때:  
```
git pull
```

### remote에 로컬 변경사항 강제 적용
```
git push --force
```



## 4.4. conflict 해결 방식

_시나리오_
c90a690: file1.txt 생성  
dec8f80: file1.txt 삭제 후 file2.txt 생성  
99f5791: file1.txt 복원  

### conflict 시 reset:  
일반적으로 생각하는 과거로 돌아가는 방식  
```
git reset [--mode] [commit_id]
git reset --hard c90a690 # 이전으로 돌아감
```
원하는 commit 시점으로 reset됨 (실무에서 사용하기 위험)  
– soft : index 보존(add한 상태, staged 상태), 워킹 디렉터리의 파일 보존. 즉 모두 보존  
– mixed : index 취소(add하기 전 상태, unstaged 상태), 워킹 디렉터리의 파일 보존 (기본 옵션)  
– hard : index 취소(add하기 전 상태, unstaged 상태), 워킹 디렉터리의 파일 삭제. 즉 모두 취소  

### conflict 시 revert:  
변경한게 있으면 그걸 반대로 수행해서 되돌리는 방식  
```
git revert [commit_id]
git revert dec8f80
```
수정한 commit 기록 포함하여 이전 commit 시점으로 revert됨 (상대적으로 안전)  
특정 시점 커밋만 되돌리고 이후 커밋은 남기고 싶을 때 유용  

### merge 시 conflict  
_시나리오_
1) main: Tigers의 manager를 Kenneth로 변경  
2) branch-1: Tigers의 manager를 Deborah로 변경  
3) main: git merge branch-1 시도  
4) **충돌 발생**  
5) 당장 해결이 어려울 경우 git merge --abort로 중단  
6) 충돌 해결 후 git add . 및 git commit으로 병합 완료  

### rebase 시 conflict:  
_시나리오_
1) main: Tigers의 manager를 Kenneth로 변경  
2) branch-2: Tigers의 manager를 Deborah로 변경  
3) branch-2: git rebase main 시도  
4) **충돌 발생**  
5) 당장 해결이 어려울 경우 git rebase --abort로 중단  
6) 충돌 해결 후 git add . 및 git rebase --continue 병합 완료  


## 4.5. 임시저장

### commit 없이 branch를 변경하려고 할 때 stash(임시저장):   
```
git stash -m 'temp'
git stash pop
```
pop 명령으로 이전에 stash로 임시 저장된 내용 불러오기  
commit 할 수 없을 때 branch 바꿔줘야하는 작업 시  



<br>
---

# 5. SourceTree - GUI

SourceTree download...








